<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apply Now - Layback Garments</title>

  <!-- âœ… Google Fonts (CLEANED) -->
  <link rel="preconnect" href="https://fonts.googleapis.com  ">
  <link rel="preconnect" href="https://fonts.gstatic.com  " crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- âœ… Font Awesome (CLEANED) -->
  <link rel="stylesheet" href="  https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css  ">

  <style>
    /* =============== BASE =============== */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --primary: #0b6623;
      --text: #000;
      --light-bg: #f9f9f9;
      --white: #fff;
      --border: #e8e8e8;
      --container: 1222px;
      --radius: 12px;
    }
    body {
      font-family: "Inter", Arial, sans-serif;
      color: var(--text);
      line-height: 1.6;
      background-color: #f5f5f5;
    }
    .container {
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
      padding: 0 15px;
    }

    /* Header (simplified) */
    header {
      background: var(--white);
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
    }
    .logo { text-align: center; padding: 10px 0; }
    .logo img { max-height: 50px; }

    /* Main */
    main {
      padding: 40px 0 60px;
    }
    .job-header {
      text-align: center;
      margin-bottom: 40px;
    }
    .job-header h1 {
      color: var(--primary);
      font-size: 2.2rem;
      margin-bottom: 10px;
    }
    .job-header .subtitle {
      color: #666;
      font-size: 1.1rem;
    }

    /* Layout */
    .application-layout {
      display: grid;
      grid-template-columns: 1fr;
      gap: 40px;
    }
    .job-details, .application-form {
      background: white;
      border-radius: var(--radius);
      box-shadow: 0 4px 16px rgba(0,0,0,0.05);
      padding: 30px;
    }
    .job-details h2, .application-form h2 {
      color: var(--primary);
      margin-bottom: 20px;
      font-size: 1.6rem;
    }

    /* Job Details */
    .job-meta {
      background: var(--light-bg);
      display: inline-block;
      padding: 6px 16px;
      border-radius: 20px;
      font-weight: 600;
      margin-bottom: 20px;
    }
    .section {
      margin-bottom: 25px;
    }
    .section h3 {
      color: var(--primary);
      margin-bottom: 12px;
      font-size: 1.2rem;
    }
    .section ul {
      padding-left: 24px;
    }
    .section li {
      margin-bottom: 8px;
      line-height: 1.5;
    }

    /* Form */
    .form-group {
      margin-bottom: 20px;
    }
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr; /* Changed for 2 columns */
      gap: 15px;
    }
    /* Specific row for City, Postal Code, Country */
    .form-row.address-details {
      grid-template-columns: 2fr 1fr 1fr; /* City wider, others narrower */
    }
    .form-control {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-family: inherit;
      font-size: 1rem;
    }
    textarea.form-control {
      min-height: 120px;
      resize: vertical;
    }
    .radio-group {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 8px;
    }
    .radio-group label {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .dropzone {
      border: 2px dashed var(--border);
      border-radius: 8px;
      padding: 30px 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      background: var(--light-bg);
    }
    .dropzone:hover {
      border-color: var(--primary);
      background: #f0f7f2;
    }
    .dropzone i {
      font-size: 2.2rem;
      color: var(--primary);
      margin-bottom: 12px;
    }
    #resumeInput { display: none; }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 28px;
      border-radius: 35px;
      font-weight: 700;
      font-size: 1.05rem;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s;
    }
    .btn-primary {
      background: var(--primary);
      color: white;
      border: none;
      box-shadow: 0 4px 12px rgba(11, 102, 35, 0.2);
    }
    .btn-primary:hover {
      background: #09551d;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(11, 102, 35, 0.3);
    }
    .btn-outline {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
    }
    .btn-group {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    /* Footer */
    footer {
      background: #000;
      color: #fff;
      padding: 20px 0;
      text-align: center;
      font-size: 14px;
    }

    @media (max-width: 768px) {
      .form-row, .form-row.address-details { grid-template-columns: 1fr; } /* Stack on mobile */
      .btn-group { flex-direction: column; }
      .job-header h1 { font-size: 1.8rem; }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="container">
      <div class="logo">
        <img src="./images/LOGO.png" alt="Layback Logo" onerror="this.src='https://via.placeholder.com/200x40/0b6623/FFFFFF?text=LOGO'">
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    <div class="container">
      <div class="job-header">
        <h1 id="jobTitle">Brand Strategist</h1>
        <p class="subtitle">Layback Garments Â· Johannesburg, South Africa</p>
      </div>

      <div class="application-layout">
        <!-- Job Details -->
        <section class="job-details">
          <h2>About This Role</h2>
          
          <div class="job-meta" id="jobLocation">
            <i class="fas fa-map-marker-alt"></i> Johannesburg, SA (Hybrid)
          </div>

          <div class="section">
            <h3>What Youâ€™ll Do</h3>
            <ul>
              <li>Lead brand strategy development and evolution</li>
              <li>Conduct market research and competitive analysis</li>
              <li>Collaborate with creative teams on campaign development</li>
              <li>Measure brand health and performance metrics</li>
              <li>Represent the brand voice across all channels</li>
            </ul>
          </div>

          <div class="section">
            <h3>What Weâ€™re Looking For</h3>
            <ul>
              <li>3+ years in brand strategy or marketing</li>
              <li>Bachelorâ€™s degree in Marketing, Business, or related field</li>
              <li>Portfolio showing strategic impact</li>
              <li>Strong storytelling and presentation skills</li>
              <li>Passion for African fashion and culture</li>
            </ul>
          </div>

          <div class="section">
            <h3>Why Layback?</h3>
            <ul>
              <li>Competitive salary + performance bonuses</li>
              <li>Flexible hybrid work model</li>
              <li>Staff discount & early product access</li>
              <li>Professional development budget</li>
              <li>Inclusive, creative team culture</li>
            </ul>
          </div>
        </section>

        <!-- Application Form -->
        <section class="application-form">
          <h2>Apply Now</h2>
          <form id="applicationForm" enctype="multipart/form-data"> <!-- Important for file upload -->
            <input type="hidden" id="appliedJob" name="jobRole" value="Brand Strategist">

            <div class="form-row">
              <div class="form-group">
                <label for="firstName">First Name *</label>
                <input type="text" id="firstName" name="firstName" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="lastName">Last Name *</label>
                <input type="text" id="lastName" name="lastName" class="form-control" required>
              </div>
            </div>

            <div class="form-group">
              <label for="email">Email *</label>
              <input type="email" id="email" name="email" class="form-control" required>
            </div>

            <div class="form-group">
              <label for="phone">Phone *</label>
              <input type="tel" id="phone" name="phone" class="form-control" placeholder="+27 ..." required>
            </div>

            <!-- NEW: Address fields -->
            <div class="form-group">
              <label for="address">Address</label>
              <input type="text" id="address" name="address" class="form-control">
            </div>

            <div class="form-row address-details"> <!-- New row for City, Postal, Country -->
              <div class="form-group">
                <label for="city">City *</label>
                <input type="text" id="city" name="city" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="postalCode">Postal Code *</label>
                <input type="text" id="postalCode" name="postalCode" class="form-control" required>
              </div>
              <div class="form-group">
                <label for="country">Country *</label>
                <input type="text" id="country" name="country" class="form-control" value="South Africa" required> <!-- Pre-filled example -->
              </div>
            </div>
            <!-- END NEW: Address fields -->

            <div class="form-group">
              <label for="resume">Upload CV/Resume *</label>
              <div class="dropzone" id="dropZone">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>PDF, DOC, or DOCX (max 5MB)</p>
                <input type="file" id="resumeInput" name="cv" accept=".pdf,.doc,.docx" required> <!-- Changed name to 'cv' -->
              </div>
              <div id="fileNameDisplay" style="margin-top: 8px; color: var(--primary);"></div>
            </div>

            <div class="form-group">
              <label for="coverLetter">Cover Letter (Optional)</label>
              <textarea id="coverLetter" name="coverLetter" class="form-control"
                placeholder="Tell us why you're excited to join Layback Garments..."></textarea>
            </div>

            <div class="btn-group">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-paper-plane"></i> Submit Application
              </button>
              <a href="join_our_team.html" class="btn btn-outline">
                <i class="fas fa-arrow-left"></i> View All Jobs
              </a>
            </div>
          </form>
        </section>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>Â© 2025 Layback Garments. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // File upload handling
    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('resumeInput'); // Corrected ID
    const fileNameDisplay = document.getElementById('fileNameDisplay');

    dropZone.addEventListener('click', () => fileInput.click());
    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      fileNameDisplay.textContent = file ? `ðŸ“„ ${file.name}` : '';
    });

    // Hash-based job routing (if needed)
    function loadJobFromHash() {
      const hash = window.location.hash.substring(1); // e.g., "brand-strategist"
      const jobTitle = document.getElementById('jobTitle');
      const jobLocation = document.getElementById('jobLocation');
      const appliedJob = document.getElementById('appliedJob');

      if (hash === 'virtual-assistant') {
        jobTitle.textContent = 'Virtual Assistant';
        jobLocation.innerHTML = '<i class="fas fa-laptop"></i> Remote (South Africa)';
        appliedJob.value = 'Virtual Assistant';
      } else {
        // Default to Brand Strategist
        jobTitle.textContent = 'Brand Strategist';
        jobLocation.innerHTML = '<i class="fas fa-map-marker-alt"></i> Johannesburg, SA (Hybrid)';
        appliedJob.value = 'Brand Strategist';
      }
    }

    // Form submission (Updated for new fields and file upload)
    document.getElementById('applicationForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const formData = new FormData(e.target); // Use FormData to capture all fields, including file

      // Example: Add filename/path if handled separately by an upload endpoint
      // const fileName = fileNameDisplay.textContent.replace('ðŸ“„ ', '') || null;
      // if (fileName) {
      //     formData.append('cvFileName', fileName);
      //     // formData.append('cvFilePath', 'path/to/saved/file'); // You'd set this after upload
      // }

      const job = document.getElementById('appliedJob').value;
      const name = document.getElementById('firstName').value;

      try {
        // Simulate backend submission (replace with actual fetch)
        // alert(`âœ… Application submitted for ${job}!\nThank you, ${name}. We'll review and contact you within 5 working days.`);

        // Actual fetch call (example)
        const response = await fetch('http://localhost:3000/api/applications', { // Use your server URL
          method: 'POST',
          body: formData // Send FormData object
          // Note: Don't set Content-Type header when using FormData, the browser sets it with the boundary
        });

        const result = await response.json();

        if (response.ok) {
          alert('Application submitted successfully!');
          // Optionally reset form: e.target.reset(); fileNameDisplay.textContent = '';
        } else {
          alert(result.error || 'Failed to submit application. Please try again.');
        }
      } catch (error) {
        console.error('Submission error:', error);
        alert('An error occurred during submission. Please try again.');
      }
    });

    // Initialize on load
    document.addEventListener('DOMContentLoaded', () => {
      loadJobFromHash();
      window.addEventListener('hashchange', loadJobFromHash);
    });
  </script>
</body>
</html>